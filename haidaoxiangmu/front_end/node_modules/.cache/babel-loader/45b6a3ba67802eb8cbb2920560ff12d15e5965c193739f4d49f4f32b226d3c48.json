{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"addMap\",\n  data() {\n    return {\n      center: {\n        lng: 0,\n        lat: 0\n      },\n      zoom: 3,\n      marker: {},\n      position: {\n        lng: 0,\n        lat: 0\n      },\n      draggable: false,\n      show: false,\n      poly: [\n        // {\n        //     lng:29.9424,\n        //     lat:122.048,\n        //     polygon:[\n        //         {lng: '122.0452438546', lat: '29.94264534284173'},\n        //         {lng: '122.0457689541', lat: '29.942290903455056'},\n        //         {lng: '122.0448565938', lat: '29.940878850006936'},\n        //         {lng: '122.0442264745', lat: '29.94178210920206'},\n        //     ],\n        // }\n      ],\n      owner: {\n        id: \"111\"\n      },\n      product: {}\n    };\n  },\n  methods: {\n    handler({\n      BMap,\n      map\n    }) {\n      console.log(BMap, map);\n      this.center.lng = 122.048;\n      this.center.lat = 29.9424;\n      this.zoom = 16;\n      this.position.lng = 122.048;\n      this.position.lat = 29.9424;\n      this.draggable = true;\n      this.poly = this.$store.state.ponds.polygons;\n    },\n    infoWindowClose() {\n      this.show = false;\n    },\n    infoWindowOpen() {\n      this.show = true;\n    },\n    //获取池塘\n    getPonds() {\n      this.$axios({\n        url: '/api/ponds/getAll',\n        methods: 'GET'\n      }).then(res => {\n        console.log(res.data.data);\n        if (res.data.status == 200) {\n          this.$store.commit('ponds/setPolygons', res.data.data.data);\n        }\n      });\n    },\n    goProduct(id) {\n      console.log(id);\n      this.$router.push();\n    }\n  },\n  created() {\n    this.getPonds();\n  },\n  mounted() {},\n  computed: {\n    Polygons() {\n      this.$store.state.ponds.polygons;\n    }\n  }\n};","map":{"version":3,"mappings":";AAwCA;EACAA;EACAC;IACA;MACAC;QAAAC;QAAAC;MAAA;MACAC;MACAC;MACAC;QAAAJ;QAAAC;MAAA;MACAI;MACAC;MAEAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MAAA,CACA;MACAC;QACAC;MACA;MACAC;IAGA;EACA;EACAC;IAEAC;MAAAC;MAAAC;IAAA;MACAC;MACA;MACA;MACA;MAEA;MACA;MAEA;MAGA;IAIA;IACAC;MACA;IACA;IACAC;MACA;IACA;IAGA;IACAC;MACA;QACAC;QACAR;MACA;QACAI;QACA;UACA;QAEA;MACA;IACA;IACAK;MAEAL;MACA;IACA;EACA;EACAM;IACA;EACA;EACAC,WAEA;EACAC;IACAC;MACA;IACA;EAEA;AACA","names":["name","data","center","lng","lat","zoom","marker","position","draggable","show","poly","owner","id","product","methods","handler","BMap","map","console","infoWindowClose","infoWindowOpen","getPonds","url","goProduct","created","mounted","computed","Polygons"],"sourceRoot":"src/components/ponds/AddPonds","sources":["AddMap.vue"],"sourcesContent":["<template>\r\n    <div class=\"addMap\">\r\n        <baidu-map class=\"map\" :center=\"center\" :zoom=\"zoom\" @ready=\"handler\">\r\n            <bm-scale anchor=\"BMAP_ANCHOR_TOP_RIGHT\"></bm-scale>\r\n            <bm-navigation anchor=\"BMAP_ANCHOR_TOP_RIGHT\"></bm-navigation>\r\n            <bm-map-type :map-types=\"['BMAP_NORMAL_MAP', 'BMAP_SATELLITE_MAP']\" anchor=\"BMAP_ANCHOR_TOP_LEFT\"></bm-map-type>\r\n\r\n            <bm-marker \r\n                v-for=\"(item) in poly\"\r\n                :key=\"item.lat\"\r\n                :position=\"item.position\" \r\n                @click=\"infoWindowOpen\"\r\n            >\r\n                <bm-info-window \r\n                    :show=\"show\" \r\n                    @close=\"infoWindowClose\" \r\n                    \r\n                >\r\n                    <div>当前池塘详细信息：</div>\r\n                    <div>池塘负责人：{{item.owner.name}}</div>\r\n                    <div>养殖品种：<el-button @click=\"goProduct(item.product.id)\" type=\"text\">{{item.product.name}}</el-button></div>\r\n                    <el-button type=\"text\">查看该池塘详细信息</el-button>\r\n\r\n                    \r\n                </bm-info-window>\r\n            </bm-marker>\r\n\r\n            <bm-polygon \r\n                \r\n                v-for=\"(item,index) in poly\" \r\n                :key=\"index\" \r\n                :path=\"item.polygon\"\r\n                \r\n            ></bm-polygon>\r\n            \r\n        </baidu-map>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"addMap\",\r\n    data(){\r\n        return {\r\n            center: {lng: 0, lat: 0},\r\n            zoom: 3,\r\n            marker:{},\r\n            position:{lng: 0, lat: 0},\r\n            draggable:false,\r\n            show:false,\r\n\r\n            poly:[\r\n                // {\r\n                //     lng:29.9424,\r\n                //     lat:122.048,\r\n                //     polygon:[\r\n                //         {lng: '122.0452438546', lat: '29.94264534284173'},\r\n                //         {lng: '122.0457689541', lat: '29.942290903455056'},\r\n                //         {lng: '122.0448565938', lat: '29.940878850006936'},\r\n                //         {lng: '122.0442264745', lat: '29.94178210920206'},\r\n                //     ],\r\n                // }\r\n            ],\r\n            owner:{\r\n                id:\"111\"\r\n            },\r\n            product:{},\r\n\r\n\r\n        }\r\n    },\r\n    methods:{\r\n\r\n        handler ({BMap, map}) {\r\n            console.log(BMap, map)\r\n            this.center.lng = 122.048\r\n            this.center.lat = 29.9424\r\n            this.zoom = 16\r\n\r\n            this.position.lng = 122.048\r\n            this.position.lat = 29.9424\r\n\r\n            this.draggable=true\r\n\r\n            \r\n            this.poly=this.$store.state.ponds.polygons\r\n\r\n\r\n\r\n        },\r\n        infoWindowClose () {\r\n            this.show = false\r\n        },\r\n        infoWindowOpen () {\r\n            this.show = true\r\n        },\r\n\r\n\r\n        //获取池塘\r\n        getPonds(){\r\n            this.$axios({\r\n                url:'/api/ponds/getAll',\r\n                methods:'GET'\r\n            }).then(res=>{\r\n                console.log(res.data.data);\r\n                if(res.data.status==200){\r\n                    this.$store.commit('ponds/setPolygons',res.data.data.data)\r\n\r\n                }\r\n            })\r\n        },\r\n        goProduct(id){\r\n\r\n            console.log(id);\r\n            this.$router.push()\r\n        }\r\n    },\r\n    created(){\r\n        this.getPonds()\r\n    },\r\n    mounted(){\r\n\r\n    },\r\n    computed:{\r\n        Polygons(){\r\n            this.$store.state.ponds.polygons\r\n        },\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .addMap{\r\n        width: 100%;\r\n        height: 100%;\r\n        .map{\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}