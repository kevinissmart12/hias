{"ast":null,"code":"export default {\n  name: 'addOwner',\n  data() {\n    return {\n      form: {\n        discriminator: '个人',\n        id: '',\n        name: '',\n        mobile: '',\n        birthday: '',\n        sex: '',\n        imgUrl: '',\n        address: '',\n        town: '',\n        village: '',\n        engagedTime: '',\n        educationLevel: '',\n        farmerTitle: '',\n        departmentId: '',\n        companyName: '',\n        establishedTime: '',\n        fixedAssets: '',\n        businessContents: '',\n        isBaseOfEmployee: '',\n        numberOfEmployee: '',\n        featuredProducts: '',\n        creditLevel: '',\n        comment: ''\n        // checkStatus:'',\n      },\n\n      activeName: '1',\n      image\n    };\n  },\n  computed: {\n    discriminator() {\n      return this.form.discriminator;\n    }\n  },\n  watch: {\n    discriminator(n, o) {\n      console.log(n);\n    }\n  },\n  methods: {\n    beforeUpload(file) {\n      this.upload(file);\n      return false;\n    },\n    //上传图片，用form-data\n    upload(file) {\n      console.log(file);\n      let type = file.name.replace(/.+\\./, \".\");\n      this.imageName = random.randomImageName(6) + type;\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('name', this.imageName);\n      this.$axios({\n        url: '/api/owner/upload',\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        },\n        data: formData\n      }).then(res => {\n        console.log(res.data.data.imgUrl);\n        this.form.imgUrl = 'http://localhost:3000' + res.data.data.imgUrl;\n      });\n    },\n    add() {\n      let data = this.qs.stringify(this.form);\n      this.$axios({\n        url: '/api/owner/add',\n        method: \"POST\",\n        data: data\n      }).then(res => {\n        console.log(res);\n        if (res.data.status == 401) return;\n        if (res.data.status !== 200) {\n          return this.$message.error(res.data.data.msg);\n        } else {\n          this.$message.success('添加成功');\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AAoJA;EACAA;EACAC;IACA;MACAC;QACAC;QACAC;QACAJ;QACAK;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACA;MACA;;MACAC;MACAC;IACA;EACA;EACAC;IACAxB;MACA;IACA;EACA;EACAyB;IACAzB;MACA0B;IACA;EACA;EACAC;IACAC;MACA;MAEA;IACA;IACA;IACAC;MACAH;MACA;MACA;MAEA;MACAI;MACAA;MAEA;QACAC;QACAC;QACAC;UAAA;QAAA;QACAnC;MACA;QACA4B;QACA;MACA;IACA;IACAQ;MACA;MAEA;QACAH;QACAC;QACAlC;MACA;QACA4B;QACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","form","discriminator","id","mobile","birthday","sex","imgUrl","address","town","village","engagedTime","educationLevel","farmerTitle","departmentId","companyName","establishedTime","fixedAssets","businessContents","isBaseOfEmployee","numberOfEmployee","featuredProducts","creditLevel","comment","activeName","image","computed","watch","console","methods","beforeUpload","upload","formData","url","method","headers","add"],"sourceRoot":"src/components/owner","sources":["AddOwner.vue"],"sourcesContent":["<template>\r\n    <div class=\"addOwner\">\r\n\r\n\r\n\r\n        <el-container>\r\n            <el-header class=\"head\">{{'添加'+discriminator+'养殖'}}</el-header>\r\n            <el-container>\r\n                <el-main style=\"padding:0;\">\r\n                    \r\n                    <el-form label-position=\"left\" :inline=\"true\" :model=\"form\" label-width=\"100px\">\r\n\r\n                        <el-form-item label=\"个人/企业\">\r\n                            <el-radio-group v-model=\"form.discriminator\">\r\n                            <el-radio label=\"个人\"></el-radio>\r\n                            <el-radio label=\"企业\"></el-radio>\r\n                            </el-radio-group>\r\n                        </el-form-item>\r\n\r\n                        <el-collapse v-model=\"activeName\" accordion>\r\n                            <el-collapse-item title=\"个人信息\" name=\"1\">\r\n                                <el-form-item label=\"名称/法人\" >\r\n                                    <el-input class=\"short\" v-model=\"form.name\"></el-input>\r\n                                </el-form-item>\r\n\r\n                                <el-form-item :label=\"form.discriminator=='个人'?'手机号码':'联系电话'\">\r\n                                    <el-input class=\"short\" v-model=\"form.mobile\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"家庭住址\">\r\n                                    <el-input class=\"short\" v-model=\"form.address\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"所在镇\">\r\n                                    <el-input class=\"short\" v-model=\"form.town\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"所在村\">\r\n                                    <el-input class=\"short\" v-model=\"form.village\"></el-input>\r\n                                </el-form-item>\r\n\r\n                                <el-form-item label=\"出生年月\">\r\n                                    <el-date-picker\r\n                                        class=\"short\"\r\n                                        v-model=\"form.birthday\"\r\n                                        type=\"date\"\r\n                                        placeholder=\"选择日期\">\r\n                                    </el-date-picker>\r\n                                </el-form-item>\r\n\r\n                                <el-form-item label=\"性别\">\r\n                                    <el-radio-group class=\"short\" v-model=\"form.sex\">\r\n                                        <el-radio label=\"男\"></el-radio>\r\n                                        <el-radio label=\"女\"></el-radio>\r\n                                    </el-radio-group>\r\n                                </el-form-item>\r\n\r\n                                <el-form-item label=\"文化程度\">\r\n                                    <el-select v-model=\"form.educationLevel\" placeholder=\"请选择\" class=\"short\">\r\n                                    <el-option label=\"小学\" value=\"小学\"></el-option>\r\n                                    <el-option label=\"初中\" value=\"初中\"></el-option>\r\n                                    <el-option label=\"高中\" value=\"高中\"></el-option>\r\n                                    <el-option label=\"大学\" value=\"大学\"></el-option>\r\n                                    <el-option label=\"研究生\" value=\"研究生\"></el-option>\r\n                                    <el-option label=\"博士\" value=\"博士\"></el-option>\r\n\r\n                                    </el-select>\r\n                                </el-form-item>\r\n                                \r\n                                <el-form-item label=\"组织机构代码\">\r\n                                    <el-input class=\"short\" v-model=\"form.departmentId\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"从业时间\">\r\n                                    <el-input class=\"short\" v-model=\"form.engagedTime\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"农民头衔\">\r\n                                    <el-input class=\"short\" v-model=\"form.farmerTitle\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"信用等级\">\r\n                                    <el-select v-model=\"form.creditLevel\" placeholder=\"请选择\" class=\"short\">\r\n                                    <el-option label=\"A\" value=\"A\"></el-option>\r\n                                    <el-option label=\"B\" value=\"B\"></el-option>\r\n                                    <el-option label=\"C\" value=\"C\"></el-option>\r\n                                    </el-select>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"图片\">\r\n                                    <el-upload\r\n                                        class=\"avatar-uploader\"\r\n                                        action=\"#\"\r\n                                        :show-file-list=\"false\"\r\n                                        :before-upload='beforeUpload'\r\n                                    >\r\n                                        <img v-if=\"form.imgUrl\" :src=\"form.imgUrl\" class=\"avatar\">\r\n                                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                                    </el-upload>\r\n                                </el-form-item>\r\n\r\n                                <el-form-item style=\"display:block;\"  label=\"备注\">\r\n                                    <el-input style=\"width:510px\" autosize type=\"textarea\" v-model=\"form.comment\"></el-input>\r\n                                </el-form-item>\r\n\r\n                            </el-collapse-item>\r\n\r\n                            <el-collapse-item v-if=\"form.discriminator=='企业'\" title=\"企业信息\" name=\"2\">\r\n                                <!-- 和企业有关的 -->\r\n                                <el-form-item v-if=\"form.discriminator=='企业'\" label=\"公司\">\r\n                                    <el-input class=\"short\" v-model=\"form.companyName\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item v-if=\"form.discriminator=='企业'\" label=\"成立时间\">\r\n                                    <el-date-picker\r\n                                        class=\"short\"\r\n                                        v-model=\"form.establishedTime\"\r\n                                        type=\"date\"\r\n                                        placeholder=\"选择日期\">\r\n                                    </el-date-picker>\r\n                                </el-form-item>\r\n                                <el-form-item v-if=\"form.discriminator=='企业'\" label=\"固定资产\">\r\n                                    <el-input class=\"short\" v-model=\"form.fixedAssets\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item v-if=\"form.discriminator=='企业'\" label=\"经营内容\">\r\n                                    <el-input class=\"short\" v-model=\"form.businessContents\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item v-if=\"form.discriminator=='企业'\" label=\"无公害基地\">\r\n                                    <el-input class=\"short\" v-model=\"form.isBaseOfEmployee\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item v-if=\"form.discriminator=='企业'\" label=\"员工人数\">\r\n                                    <el-input class=\"short\" v-model=\"form.numberOfEmployee\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item v-if=\"form.discriminator=='企业'\" label=\"特色产品\">\r\n                                    <el-input class=\"short\" v-model=\"form.featuredProducts\"></el-input>\r\n                                </el-form-item>\r\n\r\n                            </el-collapse-item>\r\n                        </el-collapse>\r\n\r\n                        <el-form-item style=\"display:block;text-align:center\">\r\n                            <el-button type=\"primary\" @click=\"add\">添加</el-button>\r\n                        </el-form-item>\r\n\r\n                    </el-form>\r\n\r\n                </el-main>\r\n            </el-container>\r\n        </el-container>\r\n\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:'addOwner',\r\n    data(){\r\n        return{\r\n            form: {\r\n                discriminator:'个人',\r\n                id:'',\r\n                name: '',\r\n                mobile:'',\r\n                birthday:'',\r\n                sex:'',\r\n                imgUrl:'',\r\n                address:'',\r\n                town:'',\r\n                village:'',\r\n                engagedTime:'',\r\n                educationLevel:'',\r\n                farmerTitle:'',\r\n                departmentId:'',\r\n                companyName:'',\r\n                establishedTime:'',\r\n                fixedAssets:'',\r\n                businessContents:'',\r\n                isBaseOfEmployee:'',\r\n                numberOfEmployee:'',\r\n                featuredProducts:'',\r\n                creditLevel:'',\r\n                comment:'',\r\n                // checkStatus:'',\r\n            },\r\n            activeName:'1',\r\n            image\r\n        }\r\n    },\r\n    computed:{\r\n        discriminator(){\r\n            return this.form.discriminator\r\n        }\r\n    },\r\n    watch:{\r\n        discriminator(n,o){\r\n            console.log(n);\r\n        }\r\n    },\r\n    methods:{\r\n        beforeUpload(file) {\r\n            this.upload(file)\r\n\r\n            return false\r\n        },\r\n        //上传图片，用form-data\r\n        upload(file){\r\n            console.log(file);\r\n            let type=file.name.replace(/.+\\./, \".\")\r\n            this.imageName=random.randomImageName(6)+type\r\n\r\n            const formData=new FormData()\r\n            formData.append('file',file)\r\n            formData.append('name',this.imageName)\r\n\r\n            this.$axios({\r\n                url:'/api/owner/upload',\r\n                method:'POST',\r\n                headers:{\"Content-Type\":\"multipart/form-data\"},\r\n                data:formData\r\n            }).then(res=>{\r\n                console.log(res.data.data.imgUrl);\r\n                this.form.imgUrl='http://localhost:3000'+res.data.data.imgUrl\r\n            })\r\n        },\r\n        add(){\r\n            let data=this.qs.stringify(this.form)\r\n\r\n            this.$axios({\r\n                url:'/api/owner/add',\r\n                method:\"POST\",\r\n                data:data\r\n            }).then(res=>{\r\n                console.log(res);\r\n                if(res.data.status==401)return\r\n                if(res.data.status!==200){\r\n                    return this.$message.error(res.data.data.msg);\r\n                }else{\r\n                    this.$message.success('添加成功');\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .addOwner{\r\n        width: 100%;\r\n        height: 100%;\r\n        background-color: #fff;\r\n        padding:20px;\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    .head{\r\n        margin-bottom:20px;\r\n        font-size:24px;\r\n        font-weight: 900;\r\n        text-align: center;\r\n    }\r\n\r\n    .short{\r\n        width: 200px;\r\n    }\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}