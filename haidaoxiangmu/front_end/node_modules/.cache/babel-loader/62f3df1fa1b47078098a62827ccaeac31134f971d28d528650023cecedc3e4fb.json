{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'topNav',\n  data() {\n    return {\n      activeIndex2: '1',\n      menu: [{\n        'id': '1',\n        content: '主页',\n        isAdmin: 0,\n        url: '/'\n      }, {\n        'id': '2',\n        content: '养殖池塘管理',\n        isAdmin: 0,\n        children: [{\n          'id': '2-1',\n          content: '养殖池塘列表',\n          isAdmin: 0,\n          url: '/ponds/all'\n        }, {\n          'id': '2-2',\n          content: '添加/编辑养殖池塘',\n          isAdmin: 0,\n          url: '/ponds/add'\n        }]\n      }, {\n        'id': '3',\n        content: '养殖户管理',\n        isAdmin: 0,\n        children: [{\n          'id': '3-1',\n          content: '查看所有养殖户信息',\n          isAdmin: 0,\n          url: '/owner/all'\n        }]\n      }, {\n        'id': '4',\n        content: '养殖品种管理',\n        isAdmin: 0,\n        children: [{\n          'id': '4-1',\n          content: '全部养殖品种列表',\n          isAdmin: 0,\n          url: '/products/all'\n        }, {\n          'id': '4-2',\n          content: '添加/编辑养殖品种',\n          isAdmin: 0,\n          url: '/products/add'\n        }]\n      }, {\n        'id': '5',\n        content: '统计数据',\n        isAdmin: 0,\n        children: [{\n          'id': '5-1',\n          content: '养殖池塘类型统计',\n          isAdmin: 0\n        }, {\n          'id': '5-2',\n          content: '养殖品种面积与产量的统计',\n          isAdmin: 0\n        }, {\n          'id': '5-3',\n          content: '全镇养殖情况统计',\n          isAdmin: 0\n        }, {\n          'id': '5-4',\n          content: '养殖人员随机采样',\n          isAdmin: 0,\n          url: '/statistic/randomOwner'\n        }]\n      }, {\n        'id': '6',\n        content: '账户管理',\n        isAdmin: 0,\n        url: '/account'\n      }, {\n        'id': '7',\n        content: '日志&审核',\n        isAdmin: 1,\n        url: '/dialog'\n      }, {\n        'id': '8',\n        content: '信息交流',\n        isAdmin: 0,\n        children: [{\n          'id': '8-1',\n          content: '查看讨论',\n          isAdmin: 0,\n          url: '/discussion'\n        }]\n      }],\n      userInfo: {}\n    };\n  },\n  methods: {\n    handleSelect(key, keyPath) {\n      // console.log(key, keyPath);\n      if (keyPath.length == 1) {\n        //没有子项的\n        console.log(this.menu[key - 1].url);\n        this.$router.push(this.menu[key - 1].url);\n      } else {\n        console.log(this.menu[keyPath[0] - 1].children[key.slice(-1) - 1].url);\n        this.$router.push(this.menu[keyPath[0] - 1].children[key.slice(-1) - 1].url);\n      }\n    },\n    getUser() {\n      this.$axios({\n        url: '/api/user/user',\n        method: 'GET'\n      }).then(res => {\n        console.log(res.data);\n        if (res.data.status == 200) {\n          this.userInfo = res.data.data.data;\n        }\n      });\n    }\n  },\n  created() {\n    this.getUser();\n  }\n};","map":{"version":3,"mappings":";AAoCA;EACAA;EACAC;IACA;MACAC;MACAC,OACA;QAAA;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAA;QAAAF;QAAAC;QAAAE,WACA;UAAA;UAAAH;UAAAC;UAAAC;QAAA,GACA;UAAA;UAAAF;UAAAC;UAAAC;QAAA;MACA,GACA;QAAA;QAAAF;QAAAC;QAAAE,WACA;UAAA;UAAAH;UAAAC;UAAAC;QAAA;MACA,GACA;QAAA;QAAAF;QAAAC;QAAAE,WACA;UAAA;UAAAH;UAAAC;UAAAC;QAAA,GACA;UAAA;UAAAF;UAAAC;UAAAC;QAAA;MACA,GACA;QAAA;QAAAF;QAAAC;QAAAE,WACA;UAAA;UAAAH;UAAAC;QAAA,GACA;UAAA;UAAAD;UAAAC;QAAA,GACA;UAAA;UAAAD;UAAAC;QAAA,GACA;UAAA;UAAAD;UAAAC;UAAAC;QAAA;MACA,GACA;QAAA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAA;QAAAF;QAAAC;QAAAE,WACA;UAAA;UAAAH;UAAAC;UAAAC;QAAA;MACA,EAEA;MACAE;IACA;EACA;EACAC;IACAC;MACA;MACA;QACA;QACAC;QACA;MACA;QACAA;QAEA;MAEA;IACA;IACAC;MACA;QACAN;QACAO;MACA;QACAF;QACA;UACA;QACA;MAEA;IACA;EACA;EACAG;IACA;EACA;AACA","names":["name","data","activeIndex2","menu","content","isAdmin","url","children","userInfo","methods","handleSelect","console","getUser","method","created"],"sourceRoot":"src/components/topNav","sources":["TopNav.vue"],"sourcesContent":["<template>\r\n    <div class=\"topNav\">\r\n\r\n        <el-menu\r\n            class=\"el-menu-demo\"\r\n            mode=\"horizontal\"\r\n            @select=\"handleSelect\"\r\n            background-color=\"#545c64\"\r\n            text-color=\"#fff\"\r\n            active-text-color=\"#ffd04b\"\r\n        >\r\n            <div v-if=\"userInfo.isAdmin==0\">\r\n                <div class=\"menuItem\" v-for=\"(item,index) in menu\" :key=\"index\">\r\n                        <el-menu-item :index=\"item.id\" v-if=\"!item.children&&item.isAdmin==userInfo.isAdmin\">{{item.content}}</el-menu-item>\r\n                        <el-submenu :index=\"item.id\" v-if=\"item.children\">\r\n                            <template slot=\"title\">{{item.content}}</template>\r\n                                <el-menu-item :index=\"subitem.id\" v-for=\"(subitem,subindex) in item.children\" :key=\"subindex\">{{subitem.content}}</el-menu-item>\r\n                        </el-submenu>\r\n                </div>\r\n            </div>\r\n            <div v-if=\"userInfo.isAdmin==1\">\r\n                <div class=\"menuItem\" v-for=\"(item,index) in menu\" :key=\"index\">\r\n                        <el-menu-item :index=\"item.id\" v-if=\"!item.children\">{{item.content}}</el-menu-item>\r\n                        <el-submenu :index=\"item.id\" v-if=\"item.children\">\r\n                            <template slot=\"title\">{{item.content}}</template>\r\n                                <el-menu-item :index=\"subitem.id\" v-for=\"(subitem,subindex) in item.children\" :key=\"subindex\">{{subitem.content}}</el-menu-item>\r\n                        </el-submenu>\r\n                </div>\r\n            </div>\r\n            \r\n\r\n        </el-menu>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:'topNav',\r\n    data(){\r\n        return{\r\n            activeIndex2: '1',\r\n            menu:[\r\n                {'id':'1',content:'主页',isAdmin:0,url:'/'},\r\n                {'id':'2',content:'养殖池塘管理',isAdmin:0,children:[\r\n                    {'id':'2-1',content:'养殖池塘列表',isAdmin:0,url:'/ponds/all'},\r\n                    {'id':'2-2',content:'添加/编辑养殖池塘',isAdmin:0,url:'/ponds/add'},\r\n                ]},\r\n                {'id':'3',content:'养殖户管理',isAdmin:0,children:[\r\n                    {'id':'3-1',content:'查看所有养殖户信息',isAdmin:0,url:'/owner/all'},\r\n                ]},\r\n                {'id':'4',content:'养殖品种管理',isAdmin:0,children:[\r\n                    {'id':'4-1',content:'全部养殖品种列表',isAdmin:0,url:'/products/all'},\r\n                    {'id':'4-2',content:'添加/编辑养殖品种',isAdmin:0,url:'/products/add'},\r\n                ]},\r\n                {'id':'5',content:'统计数据',isAdmin:0,children:[\r\n                    {'id':'5-1',content:'养殖池塘类型统计',isAdmin:0},\r\n                    {'id':'5-2',content:'养殖品种面积与产量的统计',isAdmin:0},\r\n                    {'id':'5-3',content:'全镇养殖情况统计',isAdmin:0},\r\n                    {'id':'5-4',content:'养殖人员随机采样',isAdmin:0,url:'/statistic/randomOwner'},\r\n                ]},\r\n                {'id':'6',content:'账户管理',isAdmin:0,url:'/account'},\r\n                {'id':'7',content:'日志&审核',isAdmin:1,url:'/dialog'},\r\n                {'id':'8',content:'信息交流',isAdmin:0,children:[\r\n                    {'id':'8-1',content:'查看讨论',isAdmin:0,url:'/discussion'},\r\n                ]},\r\n\r\n            ],\r\n            userInfo:{}\r\n        }\r\n    },\r\n    methods: {\r\n        handleSelect(key, keyPath) {\r\n            // console.log(key, keyPath);\r\n            if(keyPath.length==1){\r\n                //没有子项的\r\n                console.log(this.menu[key-1].url);\r\n                this.$router.push(this.menu[key-1].url)\r\n            }else{\r\n                console.log(this.menu[keyPath[0]-1].children[key.slice(-1)-1].url);\r\n\r\n                this.$router.push(this.menu[keyPath[0]-1].children[key.slice(-1)-1].url)\r\n\r\n            }\r\n        },\r\n        getUser(){\r\n            this.$axios({\r\n                url:'/api/user/user',\r\n                method:'GET'\r\n            }).then(res=>{\r\n                console.log(res.data);\r\n                if(res.data.status==200){\r\n                    this.userInfo=res.data.data.data\r\n                }\r\n                \r\n            })\r\n        },\r\n    },\r\n    created(){\r\n        this.getUser()\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .el-menu{\r\n        \r\n        .menuItem{\r\n            float:left;\r\n\r\n        }\r\n    }\r\n    ::v-deep .el-submenu__icon-arrow{\r\n        right:5px!important;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}