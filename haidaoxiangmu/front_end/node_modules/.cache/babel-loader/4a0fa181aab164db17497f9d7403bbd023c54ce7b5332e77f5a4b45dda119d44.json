{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { Loading } from 'element-ui';\nimport { Message } from 'element-ui';\nimport router from '../router';\nlet loading = null;\nfunction startLoading() {\n  loading = Loading.service({\n    lock: true,\n    text: '拼命加载中...',\n    fullscreen: true\n  });\n}\nfunction endLoading() {\n  loading.close();\n}\n\n//请求拦截\naxios.interceptors.request.use(config => {\n  //加载动画\n  startLoading();\n  if (localStorage.getItem('jwtToken')) {\n    //设置统一请求头\n    config.headers.Authorization = localStorage.getItem('jwtToken');\n  }\n  return config;\n}, error => {\n  Message.error(error.response.data);\n  return Promise.reject(error);\n});\n\n//响应拦截\naxios.interceptors.response.use(response => {\n  endLoading();\n  if (response.data.status == 401) {\n    Message.error('token失效，请重新登录');\n    localStorage.removeItem('jwtToken');\n    //跳转登录\n    router.push('/login');\n  } else if (res.data.status !== 200) {\n    return this.$message.error(res.data.data.msg);\n  }\n  return response;\n}, error => {\n  endLoading();\n  Message.error(error.response.data);\n  return Promise.reject(error);\n});\nexport default axios;","map":{"version":3,"names":["axios","Loading","Message","router","loading","startLoading","service","lock","text","fullscreen","endLoading","close","interceptors","request","use","config","localStorage","getItem","headers","Authorization","error","response","data","Promise","reject","status","removeItem","push","res","$message","msg"],"sources":["C:/Users/29903/Desktop/毕业设计的各种准备/haidaoxiangmu/hias/src/api/index.js"],"sourcesContent":["import axios from 'axios'\r\nimport { Loading } from 'element-ui';\r\nimport { Message } from 'element-ui';\r\nimport router from '../router'\r\n\r\n\r\nlet loading= null;\r\nfunction startLoading(){\r\n    loading=Loading.service({\r\n        lock:true,\r\n        text:'拼命加载中...',\r\n        fullscreen:true\r\n    })\r\n}\r\n\r\nfunction endLoading(){\r\n    loading.close()\r\n}\r\n\r\n//请求拦截\r\naxios.interceptors.request.use(config=>{\r\n    //加载动画\r\n    startLoading()\r\n    if(localStorage.getItem('jwtToken')){\r\n        //设置统一请求头\r\n        config.headers.Authorization=localStorage.getItem('jwtToken')\r\n    }\r\n\r\n\r\n    return config\r\n},error=>{\r\n    Message.error(error.response.data)\r\n\r\n    return Promise.reject(error)\r\n})\r\n\r\n\r\n//响应拦截\r\naxios.interceptors.response.use(response=>{\r\n    endLoading()\r\n    if(response.data.status==401){\r\n        Message.error('token失效，请重新登录')\r\n        \r\n        localStorage.removeItem('jwtToken')\r\n        //跳转登录\r\n        router.push('/login')\r\n    }else if(res.data.status!==200){\r\n        return this.$message.error(res.data.data.msg);\r\n    }\r\n    return response\r\n},error=>{\r\n    endLoading()\r\n    Message.error(error.response.data)\r\n\r\n\r\n    return Promise.reject(error)\r\n})\r\n\r\n\r\n\r\nexport default axios"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,OAAO,QAAQ,YAAY;AACpC,OAAOC,MAAM,MAAM,WAAW;AAG9B,IAAIC,OAAO,GAAE,IAAI;AACjB,SAASC,YAAY,GAAE;EACnBD,OAAO,GAACH,OAAO,CAACK,OAAO,CAAC;IACpBC,IAAI,EAAC,IAAI;IACTC,IAAI,EAAC,UAAU;IACfC,UAAU,EAAC;EACf,CAAC,CAAC;AACN;AAEA,SAASC,UAAU,GAAE;EACjBN,OAAO,CAACO,KAAK,EAAE;AACnB;;AAEA;AACAX,KAAK,CAACY,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAE;EACnC;EACAV,YAAY,EAAE;EACd,IAAGW,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,EAAC;IAChC;IACAF,MAAM,CAACG,OAAO,CAACC,aAAa,GAACH,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EACjE;EAGA,OAAOF,MAAM;AACjB,CAAC,EAACK,KAAK,IAAE;EACLlB,OAAO,CAACkB,KAAK,CAACA,KAAK,CAACC,QAAQ,CAACC,IAAI,CAAC;EAElC,OAAOC,OAAO,CAACC,MAAM,CAACJ,KAAK,CAAC;AAChC,CAAC,CAAC;;AAGF;AACApB,KAAK,CAACY,YAAY,CAACS,QAAQ,CAACP,GAAG,CAACO,QAAQ,IAAE;EACtCX,UAAU,EAAE;EACZ,IAAGW,QAAQ,CAACC,IAAI,CAACG,MAAM,IAAE,GAAG,EAAC;IACzBvB,OAAO,CAACkB,KAAK,CAAC,eAAe,CAAC;IAE9BJ,YAAY,CAACU,UAAU,CAAC,UAAU,CAAC;IACnC;IACAvB,MAAM,CAACwB,IAAI,CAAC,QAAQ,CAAC;EACzB,CAAC,MAAK,IAAGC,GAAG,CAACN,IAAI,CAACG,MAAM,KAAG,GAAG,EAAC;IAC3B,OAAO,IAAI,CAACI,QAAQ,CAACT,KAAK,CAACQ,GAAG,CAACN,IAAI,CAACA,IAAI,CAACQ,GAAG,CAAC;EACjD;EACA,OAAOT,QAAQ;AACnB,CAAC,EAACD,KAAK,IAAE;EACLV,UAAU,EAAE;EACZR,OAAO,CAACkB,KAAK,CAACA,KAAK,CAACC,QAAQ,CAACC,IAAI,CAAC;EAGlC,OAAOC,OAAO,CAACC,MAAM,CAACJ,KAAK,CAAC;AAChC,CAAC,CAAC;AAIF,eAAepB,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}