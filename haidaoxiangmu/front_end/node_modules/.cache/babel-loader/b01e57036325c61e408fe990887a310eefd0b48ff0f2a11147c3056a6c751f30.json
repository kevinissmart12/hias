{"ast":null,"code":"export default {\n  name: \"Side\",\n  data() {\n    return {\n      form: {\n        owner: '',\n        product: '',\n        county: '',\n        town: '',\n        village: '',\n        checkStatus: ''\n      },\n      //1=>定海区，2=>普陀区,3=>岱山县,4=>嵊泗县\n      countyOption: [{\n        value: 1,\n        label: '定海区'\n      }, {\n        value: 2,\n        label: '普陀区'\n      }, {\n        value: 3,\n        label: '岱山县'\n      }, {\n        value: 4,\n        label: '嵊泗县'\n      }],\n      townOption: [],\n      villageOption: []\n    };\n  },\n  methods: {\n    //获取镇和村\n    getTown() {\n      let data = this.qs.stringify({\n        countyId: this.form.county\n      });\n      this.$axios({\n        url: '/api/area/getTown',\n        method: 'POST',\n        data: data\n      }).then(res => {\n        console.log(res.data);\n        if (res.data.status == 200) {\n          this.townOption = res.data.data.data;\n          //赋值\n        }\n      });\n    },\n\n    getVillage() {\n      let data = this.qs.stringify({\n        Tid: this.form.town\n      });\n      this.$axios({\n        url: '/api/area/getVillage',\n        method: 'POST',\n        data: data\n      }).then(res => {\n        console.log(res.data);\n        if (res.data.status == 200) {\n          this.villageOption = res.data.data.data;\n        }\n      });\n    },\n    search() {\n      let data = this.qs.stringify({\n        ownerId: `${this.form.ownerId}`,\n        product\n      });\n      this.$axios({\n        url: '/api/ponds/search',\n        method: \"POST\",\n        data: data\n      }).then(res => {\n        console.log(res);\n        if (res.data.status == 200) {\n          if (res.data.data.has) {\n            this.$message.success(res.data.data.msg);\n            //store\n            this.$store.commit('ponds/setAllPonds', res.data.data.data);\n          } else {\n            this.$message.error(res.data.data.msg);\n          }\n        }\n      });\n    },\n    quit() {\n      this.form = {\n        county: '',\n        town: '',\n        village: '',\n        discriminator: '',\n        name: '',\n        creditLevel: '',\n        checkStatus: ''\n      };\n      this.$axios({\n        url: '/api/owner/getAll',\n        method: 'GET'\n      }).then(res => {\n        if (res.data.status == 200) {\n          this.$message.warning('已去除搜索条件');\n          this.$store.commit('allOwner/setTableData', res.data.data.data);\n        }\n      });\n    },\n    //获取owner\n    getOwner() {\n      let searchForm = {\n        name: this.form.owner,\n        county: '',\n        town: '',\n        village: '',\n        discriminator: '',\n        creditLevel: '',\n        checkStatus: ''\n      };\n      let data = this.qs.stringify(searchForm);\n      this.$axios({\n        url: '/api/owner/search',\n        method: \"POST\",\n        data: data\n      }).then(res => {\n        if (res.data.status == 200) {\n          this.$store.commit('ponds/setOwners', res.data.data.data);\n          this.getProduct();\n        }\n      });\n    },\n    selectOwner() {\n      this.Owners.forEach((i, v) => {\n        if (i.id == this.form.owner) {\n          this.form.owner = i.name;\n          this.form.ownerId = i.id;\n        }\n      });\n    },\n    //点击x去除值\n    vanishOwner() {\n      this.form.owner = '';\n      this.form.ownerId = '';\n    },\n    //获取product\n    getProduct() {\n      let searchForm = {\n        name: this.form.product\n      };\n      let data = this.qs.stringify(searchForm);\n      this.$axios({\n        url: '/api/products/search',\n        method: \"POST\",\n        data: data\n      }).then(res => {\n        if (res.data.status == 200) {\n          this.$store.commit('ponds/setProducts', res.data.data.data);\n        }\n      });\n    },\n    selectProduct() {\n      this.Products.forEach((i, v) => {\n        if (i.id == this.form.product) {\n          this.form.product = i.name;\n          this.form.productId = i.id;\n        }\n      });\n    },\n    //点击x去除值，并收起search组件\n    vanishProduct() {\n      this.form.product = '';\n      this.form.productId = '';\n    }\n  },\n  watch: {\n    'form.county'(n, o) {\n      if (n == '') return;\n      //重新选择\n      if (n !== o) {\n        //清空\n        this.form.town = '';\n        this.form.village = '';\n      }\n      //重新获取town数据\n      this.getTown();\n    },\n    'form.town'(n, o) {\n      if (n == '') return;\n      //重新选择\n      if (n !== o) {\n        //清空\n        this.form.village = '';\n      }\n      this.getVillage();\n    },\n    'form.village'(n, o) {\n      if (n == '') return;\n    }\n  },\n  created() {\n    this.getOwner();\n  },\n  computed: {\n    Owners() {\n      return this.$store.state.ponds.owners;\n    },\n    Products() {\n      return this.$store.state.ponds.products;\n    }\n  }\n};","map":{"version":3,"mappings":"AA0EA;EACAA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;MACAC,eACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;QACAC;MACA;MAEA;QACAC;QACAC;QACAjB;MACA;QACAkB;QACA;UACA;UACA;QAEA;MACA;IACA;;IACAC;MAEA;QACAC;MACA;MAEA;QACAJ;QACAC;QACAjB;MACA;QACAkB;QACA;UACA;QACA;MACA;IACA;IACAG;MACA;QACAC;QACAnB;MAEA;MAEA;QACAa;QACAC;QACAjB;MACA;QACAkB;QACA;UACA;YACA;YACA;YACA;UACA;YACA;UAEA;QAEA;MACA;IACA;IACAK;MACA;QACAnB;QACAC;QACAC;QACAkB;QACAzB;QACA0B;QACAlB;MACA;MACA;QACAS;QACAC;MACA;QAEA;UACA;UACA;QACA;MACA;IACA;IACA;IACAS;MAEA;QACA3B;QACAK;QACAC;QACAC;QACAkB;QACAC;QACAlB;MACA;MAEA;MAEA;QACAS;QACAC;QACAjB;MACA;QACA;UACA;UACA;QACA;MACA;IACA;IACA2B;MACA;QACA;UACA;UACA;QACA;MACA;IAEA;IACA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MACA;QACA9B;MAEA;MAEA;MAEA;QACAiB;QACAC;QACAjB;MACA;QACA;UACA;QACA;MACA;IACA;IACA8B;MACA;QACA;UACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;EACA;EACAC;IACA;MACA;MACA;MACA;QACA;QACA;QACA;MACA;MACA;MACA;IACA;IACA;MACA;MACA;MACA;QACA;QACA;MACA;MACA;IACA;IACA;MACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;AACA","names":["name","data","form","owner","product","county","town","village","checkStatus","countyOption","value","label","townOption","villageOption","methods","getTown","countyId","url","method","console","getVillage","Tid","search","ownerId","quit","discriminator","creditLevel","getOwner","selectOwner","vanishOwner","getProduct","selectProduct","vanishProduct","watch","created","computed","Owners","Products"],"sourceRoot":"src/components/ponds/AllPonds","sources":["Side.vue"],"sourcesContent":["<template>\r\n    <div class=\"side\">\r\n        <el-card class=\"box-card\">\r\n        <div slot=\"header\" class=\"clearfix\">\r\n            <span>池塘查询</span>\r\n        </div>\r\n            <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n                <el-form-item label=\"养殖人员\">\r\n                    <el-select v-model=\"form.owner\" @change=\"selectOwner\" @clear=\"vanishOwner\" filterable clearable placeholder=\"请选择\">\r\n                        <el-option\r\n                            v-for=\"item in Owners\"\r\n                            :key=\"item.id\"\r\n                            :label=\"item.name\"\r\n                            :value=\"item.id\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"养殖品种\">\r\n                    <el-select v-model=\"form.product\" @change=\"selectProduct\" @clear=\"vanishProduct\" filterable clearable placeholder=\"请选择\">\r\n                        <el-option\r\n                            v-for=\"item in Products\"\r\n                            :key=\"item.id\"\r\n                            :label=\"item.name\"\r\n                            :value=\"item.id\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"所在区\">\r\n                        <el-select v-model=\"form.county\" placeholder=\"请选择所在区/县\">\r\n                            <el-option\r\n                                v-for=\"item in countyOption\"\r\n                                :key=\"item.value\"\r\n                                :label=\"item.label\"\r\n                                :value=\"item.value\">\r\n                            </el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"所在镇\" >\r\n                        <el-select v-model=\"form.town\" placeholder=\"请选择所在镇\" :disabled='form.county==\"\"?true:false'>\r\n                            <el-option\r\n                                v-for=\"item in townOption\"\r\n                                :key=\"item.id\"\r\n                                :label=\"item.town\"\r\n                                :value=\"item.id\">\r\n                            </el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"所在村\">\r\n                        <el-select v-model=\"form.village\" placeholder=\"请选择所在村\" :disabled='form.county==\"\"||form.town==\"\"?true:false'>\r\n                            <el-option\r\n                                v-for=\"item in villageOption\"\r\n                                :key=\"item.id\"\r\n                                :label=\"item.village\"\r\n                                :value=\"item.id\">\r\n                            </el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"审核情况\">\r\n                        <el-select v-model=\"form.checkStatus\" placeholder=\"请选择\">\r\n                            <el-option label=\"审核中\" value=\"0\"></el-option>\r\n                            <el-option label=\"已通过\" value=\"1\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n                    <el-button type=\"danger\">去除条件</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-card>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"Side\",\r\n    data(){\r\n        return{\r\n            form:{\r\n                owner:'',\r\n                product:'',\r\n                county:'',\r\n                town:'',\r\n                village:'',\r\n                checkStatus:'',\r\n            },\r\n            //1=>定海区，2=>普陀区,3=>岱山县,4=>嵊泗县\r\n            countyOption:[\r\n                {\r\n                    value: 1,\r\n                    label: '定海区'\r\n                }, \r\n                {\r\n                    value: 2,\r\n                    label: '普陀区'\r\n                }, \r\n                {\r\n                    value: 3,\r\n                    label: '岱山县'\r\n                }, \r\n                {\r\n                    value: 4,\r\n                    label: '嵊泗县'\r\n                }, \r\n            ],\r\n            townOption:[],\r\n            villageOption:[],\r\n        }\r\n    },\r\n    methods:{\r\n        //获取镇和村\r\n        getTown(){\r\n            let data=this.qs.stringify({\r\n                countyId:this.form.county,\r\n            })\r\n\r\n            this.$axios({\r\n                url:'/api/area/getTown',\r\n                method:'POST',\r\n                data:data\r\n            }).then(res=>{\r\n                console.log(res.data);\r\n                if(res.data.status==200){\r\n                    this.townOption=res.data.data.data\r\n                    //赋值\r\n\r\n                }\r\n            })\r\n        },\r\n        getVillage(){\r\n\r\n            let data=this.qs.stringify({\r\n                Tid:this.form.town,\r\n            })\r\n\r\n            this.$axios({\r\n                url:'/api/area/getVillage',\r\n                method:'POST',\r\n                data:data\r\n            }).then(res=>{\r\n                console.log(res.data);\r\n                if(res.data.status==200){\r\n                    this.villageOption=res.data.data.data\r\n                }\r\n            })\r\n        },\r\n        search(){\r\n            let data=this.qs.stringify({\r\n                ownerId:`${this.form.ownerId}`,\r\n                product\r\n\r\n            })\r\n            \r\n            this.$axios({\r\n                url:'/api/ponds/search',\r\n                method:\"POST\",\r\n                data:data\r\n            }).then(res=>{\r\n                console.log(res);\r\n                if(res.data.status==200){\r\n                    if(res.data.data.has){\r\n                        this.$message.success(res.data.data.msg);\r\n                        //store\r\n                        this.$store.commit('ponds/setAllPonds',res.data.data.data)\r\n                    }else{\r\n                        this.$message.error(res.data.data.msg);\r\n\r\n                    }\r\n                    \r\n                }\r\n            })\r\n        },\r\n        quit(){\r\n            this.form={\r\n                county:'',\r\n                town:'',\r\n                village:'',\r\n                discriminator:'',\r\n                name:'',\r\n                creditLevel:'',\r\n                checkStatus:'',\r\n            }\r\n            this.$axios({\r\n                url:'/api/owner/getAll',\r\n                method:'GET'\r\n            }).then(res=>{\r\n\r\n                if(res.data.status==200){\r\n                    this.$message.warning('已去除搜索条件');\r\n                    this.$store.commit('allOwner/setTableData',res.data.data.data)\r\n                }\r\n            })\r\n        },\r\n        //获取owner\r\n        getOwner(){\r\n            \r\n            let searchForm={\r\n                name:this.form.owner,\r\n                county:'',\r\n                town:'',\r\n                village:'',\r\n                discriminator:'',\r\n                creditLevel:'',\r\n                checkStatus:'',\r\n            }\r\n            \r\n            let data=this.qs.stringify(searchForm)\r\n\r\n            this.$axios({\r\n                url:'/api/owner/search',\r\n                method:\"POST\",\r\n                data:data\r\n            }).then(res=>{\r\n                if(res.data.status==200){\r\n                    this.$store.commit('ponds/setOwners',res.data.data.data)\r\n                    this.getProduct()\r\n                }\r\n            })\r\n        },\r\n        selectOwner(){\r\n            this.Owners.forEach((i,v)=>{\r\n                if(i.id==this.form.owner){\r\n                    this.form.owner=i.name\r\n                    this.form.ownerId=i.id\r\n                }\r\n            })\r\n\r\n        },\r\n        //点击x去除值\r\n        vanishOwner(){\r\n            this.form.owner=''\r\n            this.form.ownerId=''\r\n        },\r\n\r\n        //获取product\r\n        getProduct(){\r\n            let searchForm={\r\n                name:this.form.product,\r\n\r\n            }\r\n            \r\n            let data=this.qs.stringify(searchForm)\r\n\r\n            this.$axios({\r\n                url:'/api/products/search',\r\n                method:\"POST\",\r\n                data:data\r\n            }).then(res=>{\r\n                if(res.data.status==200){\r\n                    this.$store.commit('ponds/setProducts',res.data.data.data)\r\n                }\r\n            })\r\n        },\r\n        selectProduct(){\r\n            this.Products.forEach((i,v)=>{\r\n                if(i.id==this.form.product){\r\n                    this.form.product=i.name\r\n                    this.form.productId=i.id\r\n                }\r\n            })\r\n        },\r\n        //点击x去除值，并收起search组件\r\n        vanishProduct(){\r\n            this.form.product=''\r\n            this.form.productId=''\r\n        },\r\n    },\r\n    watch:{\r\n        'form.county'(n,o){\r\n            if(n=='')return\r\n            //重新选择\r\n            if(n!==o){\r\n                //清空\r\n                this.form.town=''\r\n                this.form.village=''\r\n            }\r\n            //重新获取town数据\r\n            this.getTown()\r\n        },\r\n        'form.town'(n,o){\r\n            if(n=='')return\r\n            //重新选择\r\n            if(n!==o){\r\n                //清空\r\n                this.form.village=''\r\n            }\r\n            this.getVillage()\r\n        },\r\n        'form.village'(n,o){\r\n            if(n=='')return\r\n        },\r\n    },\r\n    created(){\r\n        this.getOwner()\r\n    },\r\n    computed:{\r\n        Owners(){\r\n            return this.$store.state.ponds.owners\r\n        },\r\n        Products(){\r\n            return this.$store.state.ponds.products\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}